<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>模拟一个数据检测</title>
</head>

<body>

</body>

<script type="text/javascript">
    let data = {
        name: "Vue",
        address: "https://vuejs.org/",
        // student: {
        //     name: "假老练",
        //     age: 22
        // }
    };

    const obs = new Observer(data);
    let vm = {};
    vm._data = data = obs;

    function Observer(obj) {
        // 汇总对象中所有的属性形成一个数组
        const keys = Object.keys(obj);
        // 遍历
        keys.forEach(key => {
            Object.defineProperty(this, key, {
                get() {
                    return obj[key];
                },
                set(value) {
                    console.log(`${key}被修改了, 准备解析模板, 生成虚拟DOM...`);
                    obj[key] = value;
                }
            })
        });
    }
</script>

</html>